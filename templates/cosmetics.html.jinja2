<div class="container" style="margin-top: 20px;">
    <div id="override_div"
         class="form-check form-switch item-switch center-flex"
         hidden>
        <label data-toggle="tooltip"
               title="Use Cosmetics set on UI instead of from the patch file.">
            <input class="form-check-input"
                   type="checkbox"
                   name="override_cosmetics"
                   id="override_cosmetics"
                   value="True"
                   checked/>
            Override Patch File Cosmetics
        </label>
    </div>
    <div class="row">
        <div class="col border panel">
            <h2 class="title">MUSIC RANDO
                <label data-toggle="tooltip" 
                        title="Randomizes all Music Selections.">
                    <input class="dice_checkbox"
                            type="checkbox"
                            name="random_music"
                            id="random_music"
                            value="True"/>
                    <label for="random_music"></label>
                </label>
            </h2>
            <div class="flex-container">
                <div class="form-check form-switch item-switch">
                    <label data-toggle="tooltip"
                            title="Randomizes Background Music.">
                        <input class="form-check-input"
                                type="checkbox"
                                name="music_bgm_randomized"
                                id="music_bgm_randomized"
                                value="True"/>
                        Random Background Music
                    </label>
                </div>
                <div class="form-check form-switch item-switch">
                    <label data-toggle="tooltip"
                            title="Randomizes Fanfare Themes.">
                        <input class="form-check-input"
                            type="checkbox"
                            name="music_fanfares_randomized"
                            id="music_fanfares_randomized"
                            value="True"/>
                        Random Fanfares
                    </label>
                </div>
                <div class="form-check form-switch item-switch">
                    <label data-toggle="tooltip"
                            title="Randomizes Event Themes.">
                        <input class="form-check-input"
                            type="checkbox"
                            name="music_events_randomized"
                            id="music_events_randomized"
                            value="True"/>
                        Random Event Themes
                    </label>
                </div>
                <div class="spacer"></div>
            </div>
            <hr />
            <h2 class="title">CUSTOM MUSIC</h2>
            <p class="select-title">Cosmetics ZIP (Check <a style="text-decoration:underline" target="_blank" href="https://github.com/2dos/DK64-Randomizer/wiki/Creating-Cosmetics-Data-packs">wiki</a> for format)</p>
            <input accept=".zip"
                   class="form-control"
                   type="file"
                   id="music_file"
                   name="music_file"/>
            <hr />
            <div class="row">
                <h2 class="title">MISCELLANEOUS</h2>
                <div class="flex-container">
                    <div class="item-multiselect">
                        <div class="color-selector">
                            <p class="select-title">Beaver Bother Klaptrap</p>
                            <select name="klaptrap_model"
                                    id="klaptrap_model"
                                    class="form-select multi-select"
                                    aria-label="Klaptrap"
                                    multiple
                                    size="5">
                                <option selected value="green">
                                    Green
                                </option>
                                <option value="purple">
                                    Purple
                                </option>
                                <option value="red">
                                    Red
                                </option>
                                <option value="random_klap"
                                        data-toggle="tooltip"
                                        title="Selects a random Klaptrap color (Green, Purple, or Red).">
                                    Random Klaptrap Variant
                                </option>
                                <option value="random_model"
                                        data-toggle="tooltip"
                                        title="Selects a random model from the game from a pre-determined list.">
                                    Random Model
                                </option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="flex-container">
                    <div class="form-check form-switch item-switch">
                        <label data-toggle="tooltip"
                               title="Randomizes miscellaneous cosmetic elements, including:&#10;- Peril Path Panic/Searchlight Seek Klaptraps&#10;- Skybox colors">
                            <input class="form-check-input"
                                   type="checkbox"
                                   name="misc_cosmetics"
                                   id="misc_cosmetics"
                                   value="True"/>
                            Random Miscellaneous Cosmetics
                        </label>
                    </div>
                    <div class="form-check form-switch item-switch">
                        <label data-toggle="tooltip"
                                title="Chunky will be replaced with his 'disco' variant that appears at the start of the DK Rap.">
                            <input class="form-check-input"
                                type="checkbox"
                                name="disco_chunky"
                                id="disco_chunky"
                                value="True"/>
                            Disco Chunky
                        </label>
                    </div>
                    <div class="form-check form-switch item-switch">
                        <label data-toggle="tooltip"
                                title="Text bubbles will be darkened, with the font brightened.">
                            <input class="form-check-input"
                                type="checkbox"
                                name="dark_mode_textboxes"
                                id="dark_mode_textboxes"
                                value="True"/>
                            Dark Mode Textboxes
                        </label>
                    </div>
                    <div class="spacer"></div>
                    <div class="form-check form-switch item-switch holiday" hidden>
                        <label data-toggle="tooltip"
                               title="Happy Holidays from the DK64 Randomizer Dev Team. Limited time option.">
                            <input class="form-check-input"
                                   type="checkbox"
                                   name="holiday_setting"
                                   id="holiday_setting"
                                   value="False"/>
                            Holiday Mode
                        </label>
                    </div>
                    <div class="spacer holiday" hidden></div>
                </div>
            </div>
        </div>
        <div class="col border panel">
            <h2 class="title">COLORS
                <label data-toggle="tooltip"
                        title="Randomizes all Kong and Transformation Colors.">
                    <input class="dice_checkbox"
                            type="checkbox"
                            name="random_colors"
                            id="random_colors"
                            value="True"/>
                    <label for="random_colors"></label>
                </label>
            </h2>
            <div class="flex-container">
                <div class="item-color-select">
                    <div class="color-selector">
                        <p class="select-title">DK</p>
                        <select name="dk_colors"
                                id="dk_colors"
                                class="form-select multi-select"
                                aria-label="DK"
                                multiple>
                            <option selected value="vanilla">
                                Vanilla
                            </option>
                            <option value="randomized">
                                Randomized
                            </option>
                            <option value="custom">
                                Custom
                            </option>
                        </select>
                        <div id="dk_custom">
                            <div class="input-group mb-3 dkColorPicker">
                                <input type="text"
                                       class="form-control"
                                       name="dk_custom_color"
                                       id="dk_custom_color"
                                       default="#000000">
                                <button class="btn btn-default rgb-btn" type="button">&nbsp;</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="item-color-select">
                    <div class="color-selector">
                        <p class="select-title">Diddy</p>
                        <select name="diddy_colors"
                                id="diddy_colors"
                                class="form-select multi-select"
                                aria-label="Diddy"
                                multiple>
                            <option selected value="vanilla">
                                Vanilla
                            </option>
                            <option value="randomized">
                                Randomized
                            </option>
                            <option value="custom">
                                Custom
                            </option>
                        </select>
                        <div id="diddy_custom">
                            <div class="input-group mb-3 diddyColorPicker">
                                <input type="text"
                                       class="form-control"
                                       name="diddy_custom_color"
                                       id="diddy_custom_color"
                                       default="#000000">
                                <button class="btn btn-default rgb-btn" type="button">&nbsp;</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="item-color-select">
                    <div class="color-selector">
                        <p class="select-title">Lanky</p>
                        <select name="lanky_colors"
                                id="lanky_colors"
                                class="form-select multi-select"
                                aria-label="Lanky"
                                multiple>
                            <option selected value="vanilla">
                                Vanilla
                            </option>
                            <option value="randomized">
                                Randomized
                            </option>
                            <option value="custom">
                                Custom
                            </option>
                        </select>
                        <div id="lanky_custom">
                            <div class="input-group mb-3 lankyColorPicker">
                                <input type="text"
                                       class="form-control"
                                       name="lanky_custom_color"
                                       id="lanky_custom_color"
                                       default="#000000">
                                <button class="btn btn-default rgb-btn" type="button">&nbsp;</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="item-color-select">
                    <div class="color-selector">
                        <p class="select-title">Tiny</p>
                        <select name="tiny_colors"
                                id="tiny_colors"
                                class="form-select multi-select"
                                aria-label="Tiny"
                                multiple>
                            <option selected value="vanilla">
                                Vanilla
                            </option>
                            <option value="randomized">
                                Randomized
                            </option>
                            <option value="custom">
                                Custom
                            </option>
                        </select>
                        <div id="tiny_custom">
                            <div class="input-group mb-3 tinyColorPicker">
                                <input type="text"
                                       class="form-control"
                                       name="tiny_custom_color"
                                       id="tiny_custom_color"
                                       default="#000000">
                                <button class="btn btn-default rgb-btn" type="button">&nbsp;</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="item-color-select">
                    <div class="color-selector">
                        <p class="select-title">Chunky</p>
                        <select name="chunky_colors"
                                id="chunky_colors"
                                class="form-select multi-select"
                                aria-label="Chunky"
                                multiple>
                            <option selected value="vanilla">
                                Vanilla
                            </option>
                            <option value="randomized">
                                Randomized
                            </option>
                            <option value="custom">
                                Custom
                            </option>
                        </select>
                        <div id="chunky_custom">
                            <div class="input-group mb-3 chunkyColorPicker">
                                <input type="text"
                                       class="form-control"
                                       name="chunky_custom_color"
                                       id="chunky_custom_color"
                                       default="#000000">
                                <button class="btn btn-default rgb-btn" type="button">&nbsp;</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="item-color-select">
                    <div class="color-selector">
                        <p class="select-title">Rambi</p>
                        <select name="rambi_colors"
                                id="rambi_colors"
                                class="form-select multi-select"
                                aria-label="Rambi"
                                multiple>
                            <option selected value="vanilla">
                                Vanilla
                            </option>
                            <option value="randomized">
                                Randomized
                            </option>
                            <option value="custom">
                                Custom
                            </option>
                        </select>
                        <div id="rambi_custom">
                            <div class="input-group mb-3 rambiColorPicker">
                                <input type="text"
                                       class="form-control"
                                       name="rambi_custom_color"
                                       id="rambi_custom_color"
                                       default="#000000">
                                <button class="btn btn-default rgb-btn" type="button">&nbsp;</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="item-color-select">
                    <div class="color-selector">
                        <p class="select-title">Enguarde</p>
                        <select name="enguarde_colors"
                                id="enguarde_colors"
                                class="form-select multi-select"
                                aria-label="Enguarde"
                                multiple>
                            <option selected value="vanilla">
                                Vanilla
                            </option>
                            <option value="randomized">
                                Randomized
                            </option>
                            <option value="custom">
                                Custom
                            </option>
                        </select>
                        <div id="enguarde_custom">
                            <div class="input-group mb-3 enguardeColorPicker">
                                <input type="text"
                                       class="form-control"
                                       name="enguarde_custom_color"
                                       id="enguarde_custom_color"
                                       default="#000000">
                                <button class="btn btn-default rgb-btn" type="button">&nbsp;</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <hr />
            <div class="row">
                <h2 class="title">ACCESSIBILITY</h2>
                <div class="flex-container">
                    <div class="form-check form-switch item-switch">
                        <label data-toggle="tooltip"
                               title="Remove water oscillation effects and the seasick ship rocking effect. For those who feel motion sick from these effects.">
                            <input class="form-check-input"
                                   type="checkbox"
                                   name="remove_water_oscillation"
                                   id="remove_water_oscillation"
                                   value="True"/>
                            Remove Water Oscillation
                        </label>
                    </div>
                    <div class="form-check form-switch item-switch">
                        <label data-toggle="tooltip"
                               title="Adds kong faces to balloons, making them easier to distinguish in various lighting conditions.">
                            <input class="form-check-input"
                                   type="checkbox"
                                   name="head_balloons"
                                   id="head_balloons"
                                   value="True"/>
                            Kong Head on Balloons
                        </label>
                    </div>
                </div>
                <div class="flex-container">
                    <div class="item-select">
                        <p class="select-title">
                            Colorblind Mode
                        </p>
                        <select name="colorblind_mode"
                                id="colorblind_mode"
                                class="form-select"
                                aria-label="Colorblind Mode">
                            <option selected value="off">
                                Off
                            </option>
                            <option value="prot">
                                Red-Green (Protan)
                            </option>
                            <option value="deut">
                                Red-Green (Deutan)
                            </option>
                            <option value="trit">
                                Blue-Yellow (Tritan)
                            </option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    $(function() {
        $('.dkColorPicker').izoColorPicker({
            myColors: '',
            onApply: (color) => {
                $('#dk_custom_color').trigger("change")
            }
        })
        $('.diddyColorPicker').izoColorPicker({
            myColors: '',
            onApply: (color) => {
                $('#diddy_custom_color').trigger("change")
            }
        })
        $('.lankyColorPicker').izoColorPicker({
            myColors: '',
            onApply: (color) => {
                $('#lanky_custom_color').trigger("change")
            }
        })
        $('.tinyColorPicker').izoColorPicker({
            myColors: '',
            onApply: (color) => {
                $('#tiny_custom_color').trigger("change")
            }
        })
        $('.chunkyColorPicker').izoColorPicker({
            myColors: '',
            onApply: (color) => {
                $('#chunky_custom_color').trigger("change")
            }
        })
        $('.rambiColorPicker').izoColorPicker({
            myColors: '',
            onApply: (color) => {
                $('#rambi_custom_color').trigger("change")
            }
        })
        $('.enguardeColorPicker').izoColorPicker({
            myColors: '',
            onApply: (color) => {
                $('#enguarde_custom_color').trigger("change")
            }
        })
    })
    
    $('.nav-tabs').click(function() {
        var settings = (document.cookie).split('saved_settings=')
        if (typeof settings[1] !== 'undefined') {
            var object = JSON.parse(settings[1])
            if (object.hasOwnProperty('dk_custom_color')) {
                $('.dkColorPicker').attr('style', 'background-color:' + object.dk_custom_color + ';')
            }
            if (object.hasOwnProperty('diddy_custom_color')) {
                $('.diddyColorPicker').attr('style', 'background-color:' + object.diddy_custom_color + ';')
            }
            if (object.hasOwnProperty('lanky_custom_color')) {
                $('.lankyColorPicker').attr('style', 'background-color:' + object.lanky_custom_color + ';')
            }
            if (object.hasOwnProperty('tiny_custom_color')) {
                $('.tinyColorPicker').attr('style', 'background-color:' + object.tiny_custom_color + ';')
            }
            if (object.hasOwnProperty('chunky_custom_color')) {
                $('.chunkyColorPicker').attr('style', 'background-color:' + object.chunky_custom_color + ';')
            }
            if (object.hasOwnProperty('rambi_custom_color')) {
                $('.rambiColorPicker').attr('style', 'background-color:' + object.rambi_custom_color + ';')
            }
            if (object.hasOwnProperty('enguarde_custom_color')) {
                $('.enguardeColorPicker').attr('style', 'background-color:' + object.enguarde_custom_color + ';')
            }
        }
    })
    $(function() {
        var pattern = ['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'];
        var current = 0;

        var keyHandler = function (event) {
            // If the key isn't in the pattern, or isn't the current key in the pattern, reset
            if (pattern.indexOf(event.key) < 0 || event.key !== pattern[current]) {
                current = 0;
                return;
            }
            // Update how much of the pattern is complete
            current++;
            // If complete, remove hidden and reset
            if (pattern.length === current) {
                current = 0;
                $('.holiday').removeAttr('hidden');
            }
        };
        // Listen for keydown events
        document.addEventListener('keydown', keyHandler, false);
    })
</script>
