<div>
    {% for item in spoiler %}
        {% if spoiler[item] != {} %}
            <div>
                <div class="spoiler-head"
                    id="spoilerhead-{{ item.lower().replace(' ','_').replace('(','').replace(')','') }}"
                    data-bs-toggle="collapse"
                    data-bs-target="#spoileritem-{{ item.lower().replace(' ','_').replace('(','').replace(')','') }}"
                    aria-expanded="false"
                    aria-controls="spoileritem-{{ item.lower().replace(' ','_').replace('(','').replace(')','') }}"
                    onclick="document.getElementById('spoilerhead-{{ item.lower().replace(' ','_').replace('(','').replace(')','') }}').classList.toggle('active')"
                    > {# Collapsable Header #}
                    <div class="spoiler-head-container">
                        <div class="spoiler-head-name">
                            {{ item }}
                        </div>
                        <div class="spoiler-head-caret">
                            <span class="caret-up">&#9650;</span>
                            <span class="caret-down">&#9660;</span>
                        </div>
                    </div>
                </div>
                <div class="spoiler-item collapse" id="spoileritem-{{ item.lower().replace(' ','_').replace('(','').replace(')','') }}">
                    {% if spoiler[item] is mapping %}
                        {% if item == "Playthrough" %}
                            {% for sphere_index in spoiler[item] %}
                                <div class="playthrough-head"
                                    id="playthroughhead-{{ sphere_index }}"
                                    data-bs-toggle="collapse"
                                    data-bs-target="#playthroughitem-{{ sphere_index }}"
                                    aria-expanded="false"
                                    aria-controls="playthroughitem-{{ sphere_index }}"
                                    onclick="document.getElementById('playthroughhead-{{ sphere_index }}').classList.toggle('active')"
                                    >
                                    <div class="playthrough-head-container">
                                        <div class="playthrough-head-name">
                                            {% if spoiler[item][sphere_index]["Available GBs"] != 1 %}
                                                Sphere {{ sphere_index }}: {{ spoiler[item][sphere_index]["Available GBs"] }} GBs available
                                            {% else %}
                                                Sphere {{ sphere_index }}: {{ spoiler[item][sphere_index]["Available GBs"] }} GB available
                                            {% endif %}
                                        </div>
                                        <div class="playthrough-head-caret">
                                            <span class="caret-up">&#9650;</span>
                                            <span class="caret-down">&#9660;</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="playthrough-item collapse" id="playthroughitem-{{ sphere_index }}">
                                    <table class="table table-striped table-dark settings-table ignore-width">
                                        <tbody>
                                            {% for item2 in spoiler[item][sphere_index] %}
                                                {% if item2 != "Available GBs" %}
                                                    <tr>
                                                        <td>{{ item2 }}</td>
                                                        {% if spoiler[item][sphere_index][item2] is iterable and (spoiler[item][sphere_index][item2] is not string and spoiler[item][sphere_index][item2] is not mapping) %}
                                                            <td>{{ spoiler[item][sphere_index][item2]|join(", ") }}</td>
                                                        {% else %}
                                                            <td>{{ spoiler[item][sphere_index][item2] }}</td>
                                                        {% endif %}
                                                    </tr>
                                                {% endif %}
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            {% endfor %}
                        {% else %}
                            <table class="table table-striped table-dark settings-table ignore-width">
                                <tbody>
                                    {% for item2 in spoiler[item] %}
                                        <tr>
                                            {% if item == "Items" %}
                                                {% if item2 == "Diddy Kong" %}
                                                    <td>Japes Kong</td>
                                                {% elif item2 == "Lanky Kong" %}
                                                    <td>Llama Temple Kong</td>
                                                {% elif item2 == "Tiny Kong" %}
                                                    <td>Tiny Temple Kong</td>
                                                {% elif item2 == "Chunky Kong" %}
                                                    <td>Factory Kong</td>
                                                {% else %}
                                                    <td>{{ item2 }}</td>
                                                {% endif %}
                                            {% else %}
                                                <td>{{ item2 }}</td>
                                            {% endif %}
                                            {% if spoiler[item][item2] is iterable and (spoiler[item][item2] is not string and spoiler[item][item2] is not mapping) %}
                                                <td>{{ spoiler[item][item2]|join(", ") }}</td>
                                            {% else %}
                                                <td>{{ spoiler[item][item2] }}</td>
                                            {% endif %}
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        {% endif %}
                    {% elif spoiler[item] == "True" or spoiler[item] == "False" %}
                        {{ spoiler[item] }}
                    {% elif spoiler[item] is iterable and (spoiler[item] is not string and spoiler[item] is not mapping) %}
                        {{ spoiler[item]|join(", ") }}
                    {% elif spoiler[item] is number %}
                        {{ spoiler[item] }}
                    {% elif spoiler[item] is string %}
                        {{ spoiler[item] }}
                    {% else %}
                        {{ spoiler[item] }}
                    {% endif %}
                </div>
            </div>        
        {% endif %}
    {% endfor %}
</div>